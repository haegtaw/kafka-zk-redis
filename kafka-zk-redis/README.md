# charts

##kafka+zk

ZooKeeper будет официально deprecated в Apache Kafka с выходом версии 4.0, которая запланирована на 2024 год
Тем не менее, для быстрого переезда на новую инфраструктуру считаю адекватным решением поднять кластер из 3 zk и 3 kafka, чтобы текущие приложения разработчиков могли сразу работать в новых условиях.

- storstorageClass сейчас генерится по умолчанию
- Пароли пока что всюду changeit, нужно будет изменить
- PVC для сохранения данных есть

Что точно нужно будет изменить в charts/kafka/values.yaml
    - брокеры сейчас имеют тип NodePort и nodePorts и externalIPs из моего миникуба

Что, вероятно, нужно будет изменить в charts/kafka/charts/zookeeper/values.yaml
    - affinity раскомментировать и добавить метки узлов
    - nodeSelector добавить метки узлов согласно поименованиям в кубе

- values-v2-auth.yaml нужен для настройки SSL авторизации между zk и kafka, генерация ключей в папке tls


##redis

Стандартный кластер с мастером, 3 репликами и 3 sentinel, отказоустойчивость обеспечивается за счёт podAntiAffinity